---
title: ä½¿ç”¨ GitLab + Docker å®ç° CD æŒç»­éƒ¨ç½² 
date: 2018-07-22 16:36:47
tags:
- GitLab
- Docker
- CI
- CD
- Travis CI
---

æ¥ç€ä¸Šä¸€ç¯‡æ–‡ç«  [ä½¿ç”¨ Travis CI éƒ¨ç½²åšå®¢ - è¸©å‘è®°å½•](https://dryyun.com/2018/06/25/travis-ci-deploy-blog/) ï¼Œå¾—å‡ºçš„ç»“è®ºå°±æ˜¯ä½¿ç”¨ `GitLab CI` ã€‚

## å‚è€ƒå†…å®¹
- [ç”¨ GitLab CI è¿›è¡ŒæŒç»­é›†æˆ](https://segmentfault.com/a/1190000006120164)
- [å¼€å§‹ä½¿ç”¨ GitLab CI/CD](https://segmentfault.com/a/1190000012989919)
- [ä½¿ç”¨ Gitlab CI & Docker æ­å»º CI ç¯å¢ƒ](http://walterinsh.github.io/2016/04/18/using-gitlab-ci.html)

çœ‹å®Œä¹‹åï¼Œåœ¨ç»“åˆæ–‡æ¡£çœ‹çœ‹å°±å·®ä¸å¤šä¼šäº†ã€‚

<!-- more --> 

## ä¼˜åŠ¿

ç±»ä¼¼ `.gitlab-ci.yml` è¯­æ³•å…¶å®æ²¡ä»€ä¹ˆå¥½é˜è¿°çš„ï¼Œçœ‹çœ‹æ–‡æ¡£å°±è¡Œäº†ã€‚  
æˆ‘è§‰å¾—çš„ä¼˜åŠ¿åœ¨äºæœ‰ runner è¿™ä¸ªæ¦‚å¿µï¼Œè¿™ä¸ª runner å°±æ˜¯ä½ çš„è‡ªå·±çš„æœºå™¨ï¼Œä½ å¯ä»¥é¢„å…ˆé…ç½®å¥½æ‰€æœ‰çš„ç¯å¢ƒï¼Œä½¿ç”¨ docker æ›´æ˜¯æ–¹ä¾¿ï¼Œç›¸æ¯”äº `Travis CI` çœå»äº†å¾ˆå¤šçš„é…ç½®ã€‚  
å•çº¯å°±æˆ‘æ¥è¯´ä¸€ä¸ªéƒ¨ç½²åŠŸèƒ½å°±è¡Œäº†ã€‚ 

```yml
deploy:
  stage: deploy
  script:
  - ssh machine " cd ~/blog && sh hexo-deploy "
```

## å°é—®é¢˜

å¦‚æœæ˜¯ä½¿ç”¨ [docker - gitlab-runner](https://hub.docker.com/r/gitlab/gitlab-runner/~/dockerfile/) çš„è¯ï¼Œé»˜è®¤çš„æ‰§è¡Œç”¨æˆ·æ˜¯ `gitlab-runner`ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®å‚æ•° `--user=root` æ›´æ”¹æ‰§è¡Œç”¨æˆ·ã€‚  

## ç»“è®º
å…¬å¸éƒ¨ç½²ç”¨ä¸Šäº† GitLab + GitLab CI è¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚  
å¯¹äºä¸ªäººæ¥è¯´ï¼Œæ­å»º GitLab æ¯” é…ç½® CI è¦å¤æ‚å¤šäº†ï¼Œå¦‚æœå«Œéº»çƒ¦ï¼Œå…¶å®ä¸ç”¨ CI ä¹Ÿä¸å½±å“ç”Ÿæ´»ã€‚ğŸ˜† ~


>
> åŸåˆ›æ–‡ç« ï¼Œæ¬¢è¿è½¬è½½ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œè°¢è°¢ã€‚
> åŸæ–‡é“¾æ¥åœ°å€ï¼šhttp://dryyun.com/2018/07/22/use-gitlab-docker-cd/
> ä½œè€…: [dryyun](https://dryyun.com/)  
> å‘è¡¨æ—¥æœŸ: 2018-07-22 16:36:47
>